# PCAN NTU-60 è®­ç»ƒé…ç½®ä¼˜åŒ–æ€»ç»“

## ğŸ“Š é—®é¢˜è¯Šæ–­ï¼ˆåŸºäº30ä¸ªepochçš„è®­ç»ƒæ—¥å¿—ï¼‰

### ä¸»è¦é—®é¢˜
1. **âŒ Epoch 8æ€§èƒ½å´©æºƒ**: å‡†ç¡®ç‡ä»60.12%æš´è·Œè‡³33.68%
2. **âŒ è®­ç»ƒåæœŸéœ‡è¡**: Epoch 15-30å‡†ç¡®ç‡åœ¨86%-89%ä¹‹é—´åå¤éœ‡è¡
3. **âŒ Poseåˆ†æ”¯æ»å**: Poseå‡†ç¡®ç‡(85.49%)è¿œä½äºRGB(89.53%)
4. **âŒ è¿‡æ‹Ÿåˆå€¾å‘**: è®­ç»ƒlossæŒç»­ä¸‹é™ï¼ŒéªŒè¯å‡†ç¡®ç‡åœæ»

### æ ¹æœ¬åŸå› 
- å­¦ä¹ ç‡ç­–ç•¥è¿‡äºæ¿€è¿›ï¼ˆMultiStepLRåœ¨epoch 10å’Œ20ç›´æ¥é™ä½10å€ï¼‰
- Poseåˆ†æ”¯lossæƒé‡ä¸è¶³
- æ•°æ®å¢å¼ºä¸å¤Ÿå¼º
- è®­ç»ƒepochåå°‘

---

## âœ… ä¼˜åŒ–æ–¹æ¡ˆå¯¹æ¯”

| é…ç½®é¡¹ | åŸé…ç½® | ä¼˜åŒ–å | æ”¹è¿›ç†ç”± |
|--------|--------|--------|----------|
| **max_epochs** | 30 | **50** | ç»™æ¨¡å‹æ›´å¤šå­¦ä¹ æ—¶é—´ |
| **åˆå§‹å­¦ä¹ ç‡** | 0.015 | **0.01** | é™ä½33%ï¼Œæé«˜ç¨³å®šæ€§ |
| **å­¦ä¹ ç‡è°ƒåº¦** | MultiStepLR<br>milestone=[10,20]<br>gamma=0.1 | **LinearLR(0-5) + CosineAnnealingLR(5-50)**<br>eta_min=1e-5 | å¹³æ»‘é€€ç«ï¼Œé¿å…å´©æºƒå’Œéœ‡è¡ |
| **æ¢¯åº¦è£å‰ª** | max_norm=40 | **max_norm=20** | æ›´å¼ºçš„æ¢¯åº¦ç¨³å®šæ€§ |
| **Lossæƒé‡** | [1., 1., 0.5, 0.5] | **[1., 2., 0.5, 1.0]** | Poseåˆ†æ”¯æƒé‡x2ï¼Œç¼©å°å·®è· |
| **æ•°æ®å¢å¼º** | RandomResizedCrop(0.56-1.0) | **RandomResizedCrop(0.50-1.0) + ColorJitter** | æ›´å¼ºçš„æ³›åŒ–èƒ½åŠ› |
| **Checkpointé—´éš”** | 10 | **5** | æ›´ç»†ç²’åº¦çš„ä¿å­˜ |
| **æ—©åœæœºåˆ¶** | âŒ æ—  | **âœ… patience=10, delta=0.1%** | è‡ªåŠ¨é¿å…è¿‡æ‹Ÿåˆ |

---

## ğŸ“ˆ å­¦ä¹ ç‡å˜åŒ–å¯¹æ¯”

### åŸé…ç½®ï¼ˆMultiStepLRï¼‰
```
Epoch  1-10: lr = 0.015 (å›ºå®š)
Epoch 11-20: lr = 0.0015 (â†“90%) â† å¤ªæ¿€è¿›ï¼
Epoch 21-30: lr = 0.00015 (â†“99%)
```

### ä¼˜åŒ–é…ç½®ï¼ˆLinearLR + CosineAnnealingLRï¼‰
```
Epoch  1-5:  lr = 0.001â†’0.01 (Warmup)
Epoch  6-50: lr = 0.01â†’0.00001 (å¹³æ»‘ä½™å¼¦é€€ç«)
```

**ä¼˜åŠ¿**:
- âœ… å­¦ä¹ ç‡å¹³æ»‘ä¸‹é™ï¼Œæ— çªå˜
- âœ… é¿å…Epoch 8å¼å´©æºƒ
- âœ… æ¶ˆé™¤åæœŸéœ‡è¡

---

## ğŸ¯ é¢„æœŸæ”¹è¿›æ•ˆæœ

| æŒ‡æ ‡ | åŸè®­ç»ƒ(Epoch 30) | é¢„æœŸ(Epoch 50) | æå‡ |
|------|------------------|----------------|------|
| **RGBPoseèåˆå‡†ç¡®ç‡** | 88.93% | **>90.5%** | +1.6% |
| **RGBåˆ†æ”¯å‡†ç¡®ç‡** | 89.35% | **>91.0%** | +1.7% |
| **Poseåˆ†æ”¯å‡†ç¡®ç‡** | 83.79% | **>87.5%** | +3.7% |
| **è®­ç»ƒç¨³å®šæ€§** | âš ï¸ éœ‡è¡ | **âœ… å¹³æ»‘** | - |
| **è¿‡æ‹Ÿåˆé£é™©** | âš ï¸ ä¸­ç­‰ | **âœ… ä½** | - |

---

## ğŸš€ è®­ç»ƒå‘½ä»¤

### ä»Epoch 30ç»§ç»­è®­ç»ƒåˆ°Epoch 50
```bash
cd /home/zh/ChCode/codes01/mmaction2

# åŒå¡è®­ç»ƒï¼ˆæ¨èï¼‰
bash tools/dist_train.sh \
    configs/skeleton/posec3d/rgbpose_conv3d/pcan_ntu60.py \
    2 \
    --work-dir work_dirs/pcan_ntu60

# å•å¡è®­ç»ƒ
python tools/train.py \
    configs/skeleton/posec3d/rgbpose_conv3d/pcan_ntu60.py \
    --work-dir work_dirs/pcan_ntu60
```

### è®­ç»ƒç›‘æ§
```bash
# å®æ—¶æŸ¥çœ‹è®­ç»ƒæ—¥å¿—
tail -f work_dirs/pcan_ntu60/$(ls -t work_dirs/pcan_ntu60/*.log | head -1)

# æŸ¥çœ‹å­¦ä¹ ç‡å˜åŒ–
grep "lr:" work_dirs/pcan_ntu60/$(ls -t work_dirs/pcan_ntu60/*.log | head -1) | tail -20

# æŸ¥çœ‹éªŒè¯å‡†ç¡®ç‡
grep "acc/RGBPose_1:1_top1" work_dirs/pcan_ntu60/$(ls -t work_dirs/pcan_ntu60/*.log | head -1)
```

---

## ğŸ“Œ å…³é”®æ³¨æ„äº‹é¡¹

1. **âœ… Resumeè®­ç»ƒå·²é…ç½®**: ä¼šè‡ªåŠ¨ä»`epoch_30.pth`ç»§ç»­
2. **âœ… æ—©åœä¿æŠ¤**: 10ä¸ªepochä¸æå‡ä¼šè‡ªåŠ¨åœæ­¢ï¼Œé¿å…æµªè´¹æ—¶é—´
3. **âœ… Checkpointç®¡ç†**: åªä¿ç•™æœ€è¿‘5ä¸ªepochï¼Œè‡ªåŠ¨æ¸…ç†æ—§æ–‡ä»¶
4. **âš ï¸ GPUå†…å­˜**: batch_size=20ï¼Œç¡®ä¿æ¯å¼ å¡è‡³å°‘æœ‰11GBæ˜¾å­˜
5. **âš ï¸ é¢œè‰²å¢å¼º**: æ–°å¢ColorJitterå¯èƒ½ç•¥å¾®é™ä½åˆå§‹å‡ ä¸ªepochçš„æ€§èƒ½ï¼Œå±æ­£å¸¸ç°è±¡

---

## ğŸ” è®­ç»ƒå®Œæˆååˆ†æ

è®­ç»ƒå®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å¯¹æ¯”æ€§èƒ½ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰epochçš„å‡†ç¡®ç‡è¶‹åŠ¿
python tools/analysis_tools/analyze_logs.py plot_curve \
    work_dirs/pcan_ntu60/$(ls -t work_dirs/pcan_ntu60/*.log | head -1) \
    --keys acc/RGBPose_1:1_top1 acc/rgb_top1 acc/pose_top1 \
    --out work_dirs/pcan_ntu60/accuracy_curve.png

# ä½¿ç”¨æœ€ä½³æ¨¡å‹æµ‹è¯•
python tools/test.py \
    configs/skeleton/posec3d/rgbpose_conv3d/pcan_ntu60.py \
    work_dirs/pcan_ntu60/best_acc_RGBPose_1:1_top1_epoch_XX.pth \
    --dump work_dirs/pcan_ntu60/test_results.pkl
```

---

**ç”Ÿæˆæ—¶é—´**: 2025-11-21  
**ä¼˜åŒ–ä¾æ®**: 30ä¸ªepochè®­ç»ƒæ—¥å¿—åˆ†æ  
**é…ç½®æ–‡ä»¶**: `pcan_ntu60.py`

